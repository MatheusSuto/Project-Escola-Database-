create database ProjetoBancoDeDados;

use ProjetoBancoDeDados;

CREATE TABLE Filial (
	IdFilial int primary key not null,
    Nome varchar(50) not null,
    Localização varchar(150) not null,
	FkIdCardapio int,
    FkidQuantIng int,
    foreign key (FkIdCardapio) references Cardapio (IdCardapio),
    foreign key (FkIdQuantIng) references QuantidadeIngredientes (IdQuantIng)
);

create table QuantidadeIngredientes (
	IdQuantIng int primary key not null,
    Tomate int not null,
    Cebola int not null,
    Alface int not null,
    Picles int not null,
    Pão int not null,
    Carne int not null,
    Queijo int not null,
    Batata int not null    
    -- Quantidade em Kg --
);

CREATE TABLE Cardapio (
	IdCardapio int primary key not null,
    Nome varchar(50) not null
);

create table Produto (
	IdProduto int primary key not null,
    Nome varchar(30) not null,
    FkIdProdInd int,
    FkIdCombo int,
    foreign key (FkIdProdInd) references ProdutoIndividual (IdProdInd),
    foreign key (FkIdCombo) references Combo (IdCombo)
);

create table ProdutosCardápio (
	IdProdC int primary key not null,
    FkIdCardapio int,
    FkIdProdInd int,
    foreign key (FkIdCardapio) references Cardapio (IdCardapio),
    foreign key (FkIdProdInd) references ProdutoIndividual (IdProdInd)
);

create table Combo (
	IdCombo int primary key not null,
    Nome varchar(50),
    Item int,
    FkIdProdInd int,
    Preço float,
    foreign key (FkIdProdInd) references ProdutoIndividual (IdProdInd)
);

create table ProdutoIndividual (
	IdProdInd int primary key not null,
    Nome varchar(50),
    Ingredientes varchar(200),
    ModoDePreparo varchar(1000),
    Preço float
);

create table PedidosProduto (
	IdPedProd int primary key not null,
    FkIdPedido int,
    FkIdProduto int,
    Item int,
    foreign key (FkIdPedido) references Pedido (IdPedido),
    foreign key (FkIdProduto) references Produto (IdProduto)
);

create table Pedido (
	IdPedido int primary key not null,
    TotalPagar float
);

create table Cliente (
	IdCliente int primary key not null,
    Nome varchar(20),
    FkIdPedido int,
    foreign key (FkIdPedido) references Pedido (Idpedido)
);

insert into Cardapio (IdCardapio, Nome) values (1, 'Cardápio Tradicional');
insert into QuantidadeIngredientes (IdQuantIng, Tomate, Cebola, Alface, Picles, Pão, Carne, Queijo, Batata) values (1, 50, 30, 5, 15, 30, 50, 10, 25);
insert into Filial (IdFilial, Nome, Localização, FkIdCardapio, FkIdQuantIng) values (1, 'Burgão da Esquina', 'Rebouças, Curitiba-PR', 1, 1);
insert into ProdutoIndividual (idProdInd, Nome, Ingredientes, ModoDePreparo, Preço) values (1, 'Burgão Tradicional', 'Pão, Carne, Queijo, Alface, Cebola', 'Esquente a carne congelada na chapa com uma fatia de queijo em cima e coloque no pão. Em seguida, adicione o alface e a cebola, finalizando com a outra fatia de pão.', 22.50);
insert into ProdutoIndividual (idProdInd, Nome, Ingredientes, ModoDePreparo, Preço) values (2, 'X-Burgão', 'Pão, Carne, Queijo, Alface, Tomate, Cebola, Picles', 'Esquente a carne na chapa com uma fatia de queijo em cima e coloque no pão. Em seguida, adicione o alface, tomate, cebola eo o picles, finalizando com a outra fatia', 25);
insert into ProdutoIndividual (idProdInd, Nome, Ingredientes, ModoDePreparo, Preço) values (3, 'Burgão Duplo', 'Pão, Carnex2, Queijo, Cebola', 'Esquente a carne na chapa, colocando uma fatia de queijo no meio das carnes e coloque no pão. Em seguida adicione a cebola e finalize com a outra fatia de pão.', 24.99);
insert into ProdutoIndividual (idProdInd, Nome, Ingredientes, ModoDePreparo, Preço) values (4, 'Batata Frita', 'Batata', 'Frite a batata no óleo e adicione sal, em seguida coloque na embalagem de batata', 15.98);
insert into ProdutoIndividual (idProdInd, Nome, Ingredientes, ModoDePreparo, Preço) values (5, 'Coca Cola', null, null, 5.99);
insert into Combo (IdCombo, Nome, Item, FkIdProdInd, Preço) values (1, 'combo Tradicional', 1, 1, 46.99);
insert into Combo (IdCombo, Nome, Item, FkIdProdInd, Preço) values (2, 'combo Tradicional', 1, 3, 46.99);
insert into Combo (IdCombo, Nome, Item, FkIdProdInd, Preço) values (3, 'combo Tradicional', 1, 5, 46.99);

drop table ProdutosCardápio; 
drop table PedidosProduto;
drop table Produto;
Drop table Combo;

drop database ProjetoBancoDeDados;

select * from Combo
